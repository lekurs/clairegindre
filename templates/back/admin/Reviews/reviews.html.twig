{% extends "admin_layout.html.twig" %}

{% block header %}
{{ parent() }}

<link rel="stylesheet" href="{{ asset('css/styles/reviews.css') }}" />
{% endblock %}

{%  block head %}
    {{ parent() }}
    {% block title %}
    <title>Administration</title>
    {% endblock %}
{% endblock %}

{% block content %}
<section>
    {% block showBlog %}
        <div class="container">
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    {% block title_admin %}
                        <h1 class="title-admin">Gestion des avis clients</h1>
                    {% endblock %}
                </div>
            </div>
            <div class="row">
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">Image</div>
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">Titre</div>
                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12">Résumé</div>
                <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">Statut</div>
                <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12 col-12">Editer</div>
                <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12 col-12">Supprimer</div>
            </div>
            <div class="row reviews-container">
            {% for review in reviews %}
                    <div class="row reviews-content">
                        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                            <img src="{{ asset(review.imagePath ~ '/' ~ review.imageName) }}" class="img-reviews" />
                        </div>
                        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                            <p>{{ review.title }}</p>
                        </div>
                        <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12">
                            {{ review.content }}
                        </div>
                        <div class="col-xl-2 col-lg-2 col-md-12 col-sm-12 col-12">
                            <div class="row no-gutters">
                                <div class="switch switch-rectangle">
                                    <input type="checkbox" id="checkbox3" class="switch-checkbox" value="{{ review.online }}" {% if review.online != 0 %} checked {% endif %}>
                                    <label for="checkbox3" class="switch-label">
                                        <div class="switch-toggle"></div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12 col-12">
                            <a href="{{ path('adminEditReview', { 'id': review.id }) }}"><i class="fa fa-edit"></i></a>
                        </div>
                        <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12 col-12">
                            <a href="{{ path('adminDeleteReview', { 'id': review.id }) }}"><i class="fa fa-trash"></i></a>
                        </div>
                    </div>
            {% endfor %}
            </div>
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <span data-toggle="modal" data-target="#createReview" ><button type="button" class="btn btn-dark admin-button"><i class="fa fa-plus"></i></button></span>
            </div>
        </div>
    </div>
    {% endblock %}

    {# MODAL ADD #}
    <div class="modal fade" id="createReview" tabindex="-1" role="dialog" aria-labelledby="createReviewsModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createReviewsModalTitle">Ajouter un avis client</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {{ form_start(form) }}
                <div class="modal-body">
                    {{ form_widget(form) }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                    <button type="submit"  class="btn btn-primary">Ajouter</button>
                </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cloud.tinymce.com/stable/tinymce.min.js?apiKey=7g8w49lzy5eyqt1o7hle0gzlmm3c84veiyraf1nwtm9eur9t"></script>
    <script>
        tinymce.init({
            selector: 'textarea#add_reviews_content',
            height: 300,
            toolbar: [
                'undo redo | styleselect | bold italic | link image',
                'alignleft aligncenter alignright'
            ]
        });
    </script>
{% endblock %}