{% extends "admin_layout.html.twig" %}

{%  block head %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/styles/blog.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/styles/galleriemaker.css') }}" />
    {% block title %}
        <title>Admin | Article</title>
    {% endblock %}
{% endblock %}

{% block content %}
    {% block FlashMessage %}

    {% endblock %}

    {% block showBlog %}
    <section>
        <div class="container">
            {% block title_admin %}
                <div class="row no-gutters">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        <h1>Article de blog pour la galerie : {{ gallery.title }}</h1>
                    </div>
                </div>
            {% endblock %}
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-sm-12 col-md-12 col-12">
                    {{ form_start(form) }}
                    {{ form_widget(form) }}
                    <button type="submit" class="btn btn-dark">Enregistrer</button>
                    {{ form_end(form) }}
                </div>
            </div>

            <div class="row no-gutters">
                <div class="maker container no-gutters" data-id="article_{{ gallery.title }}"></div>
            </div>
        </div>
    {% endblock %}
    <!-- MODAL PICTURES -->
    <div class="modal fade" id="createImgModal" tabindex="-1" role="dialog" aria-labelledby="createImgModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createImgModalTitle">Enregistrer un article</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                    {% for picture in gallery.pictures %}
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <img src="{{ asset(picture.publicPath ~ '/' ~ picture.pictureName) }}"  class="img-thumbnail rounded float-left" id="img_{{ picture.id }}">
                        </div>
                    {% endfor %}
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                    <button type="submit"  class="btn btn-primary">Enregistrer</button>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cloud.tinymce.com/stable/tinymce.min.js?apiKey=7g8w49lzy5eyqt1o7hle0gzlmm3c84veiyraf1nwtm9eur9t"></script>
    <script>
        tinymce.init({
            selector: 'textarea#add_article_content',
            height: 300,
            toolbar: [
                'undo redo | styleselect | bold italic | link image',
                'alignleft aligncenter alignright'
            ]
        });
    </script>
    <script src="{{ asset('js/back/galleriemaker.js') }}"></script>
    <script>
        $(document).ready(function(){
            $(".maker").galleriemaker({
                nbcell:3,
                script: '{{ path('adminGallerieMaker', { 'slugGallery': gallery.slug }) }}'
            });
        });
    </script>
{% endblock %}